<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link href="./output.css" rel="stylesheet" />
    <title>Simple Journal App</title>
  </head>
  <body class="p-4 m-10 border-2 border-black rounded-xl bg-gray-100">
    <h1
      class="text-5xl text-white bg-green-600 font-semibold p-4 m-10 rounded-xl border-2 border-black text-center"
    >
      Simple Journal App
    </h1>
    <!-- Form to create new journal entry -->
    <div class="new-entry-form mb-8 p-4 rounded-lg shadow-md">
      <h2 class="text-2xl font-bold mb-4">New Journal Entry</h2>
      <form id="new-entry-form" class="space-y-4">
        <input
          type="text"
          id="title"
          placeholder="Title"
          required
          class="w-full p-2 border rounded-md"
        />
        <input
          type="date"
          id="date"
          required
          class="w-full p-2 border rounded-md"
        />
        <div class="flex space-x-2 mb-2">
          <button
            type="button"
            onclick="adjustFontSize('increase')"
            class="p-2 border rounded-md bg-gray-200"
          >
            A+
          </button>
          <button
            type="button"
            onclick="adjustFontSize('decrease')"
            class="p-2 border rounded-md bg-gray-200"
          >
            A-
          </button>
          <button
            type="button"
            onclick="applyStyle('bold')"
            class="p-2 border rounded-md bg-gray-200"
          >
            <b>B</b>
          </button>
          <button
            type="button"
            onclick="applyStyle('italic')"
            class="p-2 border rounded-md bg-gray-200"
          >
            <i>I</i>
          </button>
        </div>
        <textarea
          id="content"
          placeholder="Content"
          required
          class="w-full p-2 border rounded-md"
        ></textarea>
        <select id="category" class="w-full p-2 border rounded-md">
          <option value="work">Work</option>
          <option value="personal">Personal</option>
          <option value="other">Other</option>
        </select>
        <select id="mood" class="w-full p-2 border rounded-md">
          <option value="happy">Happy</option>
          <option value="neutral">Neutral</option>
          <option value="sad">Sad</option>
        </select>
        <input
          type="text"
          id="tags"
          placeholder="Tags (comma separated)"
          class="w-full p-2 border rounded-md"
        />
        <button
          type="submit"
          class="w-full bg-green-600 text-white p-2 rounded-md"
        >
          Add Entry
        </button>
      </form>
    </div>
    <!-- Analytics display -->
    <div class="analytics mb-8 p-4 bg-white rounded-lg shadow-md">
      <h2 class="text-2xl font-bold mb-4">Analytics</h2>
      <p>Total Entries: <span id="total-entries">0</span></p>
      <p>Favorite Count: <span id="favorite-count">0</span></p>
      <p>Archived Count: <span id="archived-count">0</span></p>
    </div>
    <!-- Font Size Adjustment -->
    <div class="font-size-adjustment mb-8 p-4 bg-white rounded-lg shadow-md">
      <h2 class="text-2xl font-bold mb-4">Font Size Adjustment</h2>
      <select id="font-size" class="w-full p-2 border rounded-md">
        <option value="16px">Default</option>
        <option value="18px">Large</option>
        <option value="20px">Larger</option>
      </select>
    </div>
    <!-- MAIN BODY CARDS -->
    <div class="flex flex-wrap col-span-2 justify-center gap-8">
      <!-- CARD #1 -->
      <a
        href="favorites.html"
        class="max-w-sm rounded overflow-hidden shadow-lg border-2 bg-emerald-300 p-4 block"
      >
        <h2 class="font-bold text-xl mb-2 text-center">Favorites</h2>
        <img class="w-full" src="./img/fav.jpg" alt="" />
        <div class="px-6 py-4">
          <p class="text-gray-700 text-base">View all your favorite entries.</p>
        </div>
      </a>
      <!-- CARD #2 -->
      <a
        href="recent.html"
        class="max-w-sm rounded overflow-hidden shadow-lg border-2 bg-emerald-300 p-4 block"
      >
        <h2 class="font-bold text-xl mb-2 text-center">Recent</h2>
        <img class="w-full" src="./img/fav.jpg" alt="" />
        <div class="px-6 py-4">
          <p class="text-gray-700 text-base">View your most recent entries.</p>
        </div>
      </a>
      <!-- CARD #3 -->
      <a
        href="categories.html"
        class="max-w-sm rounded overflow-hidden shadow-lg border-2 bg-emerald-300 p-4 block"
      >
        <h2 class="font-bold text-xl mb-2 text-center">Categories</h2>
        <img class="w-full" src="./img/fav.jpg" alt="" />
        <div class="px-6 py-4">
          <p class="text-gray-700 text-base">Browse entries by category.</p>
        </div>
      </a>
      <!-- CARD #4 -->
      <a
        href="all-entries.html"
        class="max-w-sm rounded overflow-hidden shadow-lg border-2 bg-emerald-300 p-4 block"
      >
        <h2 class="font-bold text-xl mb-2 text-center">All Entries</h2>
        <img class="w-full" src="./img/fav.jpg" alt="" />
        <div class="px-6 py-4">
          <p class="text-gray-700 text-base">View all your journal entries.</p>
        </div>
      </a>
    </div>
    <script src="./script.js"></script>
    <script>
      document.addEventListener("DOMContentLoaded", () => {
        window.fetchAnalytics();
      });

      document.addEventListener("visibilitychange", () => {
        if (document.visibilityState === "visible") {
          window.fetchAnalytics();
        }
      });

      function adjustFontSize(action) {
        const textarea = document.getElementById("content");
        let fontSize = window.getComputedStyle(textarea).fontSize;
        fontSize = parseInt(fontSize);
        if (action === "increase") {
          fontSize += 2;
        } else if (action === "decrease") {
          fontSize -= 2;
        }
        textarea.style.fontSize = `${fontSize}px`;
      }

      function applyStyle(style) {
        const textarea = document.getElementById("content");
        const start = textarea.selectionStart;
        const end = textarea.selectionEnd;
        const selectedText = textarea.value.substring(start, end);
        let newText = "";
        if (style === "bold") {
          newText = `<b>${selectedText}</b>`;
        } else if (style === "italic") {
          newText = `<i>${selectedText}</i>`;
        }
        textarea.value =
          textarea.value.substring(0, start) +
          newText +
          textarea.value.substring(end);
      }
    </script>
  </body>
</html>
